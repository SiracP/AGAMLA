<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        
        <title>Agamla Anasayfa | #{userBean.tag}</title>
        
        <link href='resources/css/bootstrap.min.css' rel='stylesheet' type='text/css'/>
        <script src="https://kit.fontawesome.com/41f4fd74e6.js" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/ionicons@5.5.1/dist/ionicons.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
       <link href="http://fonts.googleapis.com/css?family=Nunito:100italic,100,300italic,300,400italic,400,700italic,700,900italic,900" rel="stylesheet" type="text/css"/>
       <link href='resources/css/agamla-main.css' rel='stylesheet' type='text/css'/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"/>
       
    </h:head>
    <h:body onload="init();">
        <div class="">
            <div class="row-main box row ">
                <div class="left-Panel col-0 col-sm-0 col-md-4 col-lg-3 d-none d-md-block ">
                     <div class="stick-top" style="left:8%;">
                        <div class="marka">
                            AGAMLA
                        </div>
                        <div class="Menu">
                            <h:form>
                            <ul class="left-Panel-Menu">
                                <li>
                                    <h:commandLink action="home.xhtml?faces-redirect=true" class="left-Panel-Link "><i class="fas fa-home"></i>Anasayfa</h:commandLink>
                                </li>
                                <li>
                                     <h:commandLink action="messages.xhtml?faces-redirect=true" class="left-Panel-Link"><i class="fas fa-envelope"></i>Mesajlar</h:commandLink>
                                </li>
                                <li>
                                    <h:commandLink action="notifications.xhtml?faces-redirect=true" class="left-Panel-Link"><i class="fas fa-bell"></i>Bildirimler</h:commandLink>
                                </li>
                                <li>
                                    <h:commandLink action="profile.xhtml?faces-redirect=true" class="left-Panel-Link"><i class="fas fa-user-alt"></i>Profil</h:commandLink>
                                </li>
                                <li>
                                    <h:commandLink action="saves.xhtml?faces-redirect=true" class="left-Panel-Link"><i class="fas fa-save"></i>Kaydedilenler</h:commandLink>
                                </li>
                                <li>
                                    <h:commandLink action="settings.xhtml?faces-redirect=true" class="left-Panel-Link left-Panel-Link-Selected"><i class="fas fa-cog"></i>Ayarlar</h:commandLink>
                                </li>

                            </ul>
                            </h:form>
                        </div>
                    </div>
                    
                    <div class="cd-popup" role="alert">
                            <div class="cd-popup-container">
                                    <p>Çıkış yapmak istediğine emin misin?</p>
                                    <ul class="cd-buttons">
                                        
                                            
                                        
                                        <li><h:form>
                                            
                                           
                                            <h:commandLink action="#{userBean.cikisYap()}">
                                                Evet
                                            </h:commandLink> </h:form>
                                            </li>
                                            <li><a class="hayirClose" href="#0">Hayır</a></li>
                                    </ul>
                                    <a href="#0" class="cd-popup-close img-replace"></a>
                            </div> 
                    </div> 
                     
                     <div class="cikisYap cd-popup-trigger" id="cikismyBtn">
                        <div class="cikisYap-Foto">
                            <img width="40px"
                                 src="${userBean.profilePictureUri}"
                                 alt="profilResim" style="border-radius: 20px;"/>
                        </div>
                        <div class="cikisYap-Text">
                            <div class="cikisYap-Profil-Ismi">
                                ${userBean.firstName} #{userBean.lastName}
                            </div>
                            <div class="cikisYap-Profil-Username">
                                @#{userBean.tag}
                            </div>

                        </div>
                        <div class="cikisYap-Cikis">
                            ...
                        </div>

                    </div>
                
                </div>
                
            <!-->
            
            
                BURAYA RESPONSIVE OLDUĞUNDA SOL PANELİN YAZISIZ HALİ GELECEK
                css ile olursa ok yoksa yeni panel yaz.
            </!-->   
            <div class="main-Panel col-12 col-sm-12 col-md-8 col-lg-9 col-xl-6 m-sm-0 m-0 ml-lg-0 w-100">
                
                <div class="container my-5">
        <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab"
                   aria-controls="pills-home" aria-selected="true">Profili düzenle</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab"
                   aria-controls="pills-profile" aria-selected="false">Güvenlik</a>
            </li>
        </ul>
        <div class="tab-content" id="pills-tabContent">
           
                
            
            <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                 <h:form enctype="multipart/form-data">
                
               <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text">Adın ve soyadın</span>
                    </div>
                    
                   <h:inputText label="Adın" class="form-control" value="#{userBean.firstName}" pt:placeholder="Ad" pt:required="required" ></h:inputText>
                   <h:inputText label="Soyadın" class="form-control" value="#{userBean.lastName}" pt:placeholder="Soyad" pt:required="required"></h:inputText>
                </div>
                
                <div class="input-group flex-nowrap mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="addon-wrapping">@</span>
                    </div>
                     <h:inputText class="form-control" value="#{userBean.tag}" pt:placeholder="Kullanıcı Adı" pt:required="required"></h:inputText>
              </div>
                <div class="input-group flex-nowrap mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="addon-wrapping">Biografi</span>
                    </div>
                    <h:inputText label="User Bio" class="form-control" value="#{userBean.bio}" pt:placeholder="Kullanıcı Biografi" pt:required="required"></h:inputText>
              </div>
                <div class="input-group flex-nowrap mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="addon-wrapping">Doğum Tarihi</span>
                    </div>
                    <h:inputText validatorMessage="#{userBean.hataliMailFormatiGirisiSettings()}" label="User Birth Date" class="form-control" value="#{userBean.birthDate}" pt:placeholder="Kullanıcı Doğum Tarihi" pt:required="required">
                     
                     
                     <f:validateRegex pattern="^([0-2][0-9]|(3)[0-1])(.)(((0)[0-9])|((1)[0-2]))(.)\d{4}$" />
                     </h:inputText>
              </div>
                <div class="input-group flex-nowrap mb-3">
                   <div class="form-group">
                        <label for="exampleFormControlFile1">Profil Fotoğrafın</label>
                        <h:inputFile class="form-control-file" id="pp" value="#{userBean.profileDoc}"></h:inputFile>
                        <img src="#{userBean.profilePictureUri}" style = "width:60%; margin-top:10px;"></img>
                  </div>
              </div>
                <div class="input-group flex-nowrap mb-3">
                   <div class="form-group">
                        <label for="exampleFormControlFile1">Kapak Fotoğrafın</label>
                        <h:inputFile class="form-control-file" required="true" id="cp" value="#{userBean.coverDoc}"></h:inputFile>
                        <img src="#{userBean.coverPictureUri}"  style = "width:80%; margin-top:10px;"></img>
                  </div>
              </div>
                     <h:panelGroup rendered="#{userBean.profileDocHata != null}">
                                 <div class="mx-5 alert alert-danger" id ="hata" role="alert">
                                     <div class="hata-msg">
                                        #{userBean.profileDocHata}
                                     </div>
                                        
                                </div>
                     </h:panelGroup>
                         <h:panelGroup rendered="#{userBean.coverDocHata != null}">
                                 <div class="mx-5 alert alert-danger" id ="hata" role="alert">
                                     <div class="hata-msg">
                                        #{userBean.coverDocHata}
                                     </div>
                                        
                                </div>
                         </h:panelGroup>
                     <h:panelGroup rendered="#{userBean.msg != null}">
                                 <div class="mx-5 alert alert-danger" id ="hata" role="alert">
                                     <div class="hata-msg">
                                        #{userBean.msg}
                                     </div>
                                        
                                </div>
                         </h:panelGroup>
                     <div class="text-center">
                         <h:commandButton class="btn btn-primary" value ="Bilgileri Guncelle" action ="#{userBean.bilgileriGuncelle()}">
                             
                         </h:commandButton>
                         
                     </div>

                
                </h:form>
            </div>
                
            <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
             <h:form>
            <div class="input-group flex-nowrap mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="addon-wrapping">Mevcut Şifre</span>
                    </div>
                     <h:inputSecret class="form-control" value="#{userBean.activePassword}" pt:placeholder="Mevcut Şifre" pt:required="required"></h:inputSecret>
              </div>
                
                <div class="input-group flex-nowrap mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="addon-wrapping">Yeni Şifre</span>
                    </div>
                     <h:inputSecret class="form-control" value="#{userBean.newPassword}" pt:placeholder="Yeni Şifre" pt:required="required"></h:inputSecret>
              </div>
                <div class="input-group flex-nowrap mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="addon-wrapping">Yeni Şifre Tekrar</span>
                    </div>
                    <h:inputSecret class="form-control" value="#{userBean.newPasswordAgain}" pt:placeholder="Yeni Şifre Tekrar" pt:required="required"></h:inputSecret>
              </div>
            <div class="text-center">
               
                
                
                <h:panelGroup rendered="#{userBean.sifreDurum == -1}">
                                 <div class="mx-5 alert alert-danger" id ="hata" role="alert">
                                     <div class="hata-msg">
                                        #{userBean.sifreHata}
                                     </div>
                                        
                                </div>
                         </h:panelGroup>
                 <h:panelGroup rendered="#{userBean.sifreDurum == 1}">
                                 <div class="mx-5 alert alert-success" id ="hata" role="alert">
                                     <div class="hata-msg">
                                        #{userBean.sifreHata}
                                     </div>
                                        
                                </div>
                         </h:panelGroup>
                
                         <h:commandButton class="btn btn-primary" value ="Şifreyi Güncelle" action ="#{userBean.sifreyiGuncelle()}">
                             
                         </h:commandButton>
                         
                     </div>
            
            </h:form>
            
            </div>
        </div>
    </div>
                
                
                

            </div>
            <div class="right-Panel col-0 col-sm-0 d-md-none col-lg-0 col-xl-3 d-none d-lg-none d-xl-block">
                <div class="stick-top" style="right:6%;">
                    <div class="search">
                        <h:form >

                            <h:inputText pt:required="required" class="search-input" pt:placeholder="Agalarını bul..." value="#{userBean.ara}"></h:inputText> <h:commandLink
                            action="#{userBean.aramaYap()}"
                            class="search-icon">
                                 <i class="fa fa-search"></i>
                               </h:commandLink>
                            <h:commandButton action="#{userBean.aramaYap()}" style="display:none;">
                                
                            </h:commandButton>
                        </h:form>
                    </div>
                    <div>
                        <h:form>
                            <ul class="right-Panel-menu">
                                <li> 
                                     <h:commandLink action="home" class="right-Panel-out-link">Hakkinda</h:commandLink>
                                </li>
                                <li> 
                                     <h:commandLink action="home" class="right-Panel-out-link">Hizmet Sartlari</h:commandLink>
                                </li>
                                <li> 
                                     <h:commandLink action="home" class="right-Panel-out-link">Iletisim</h:commandLink>
                                </li>
                                <li> 
                                     <h:commandLink action="home" class="right-Panel-out-link">2021 Agalar</h:commandLink>
                                </li>
                            </ul>

                        </h:form>
                    </div>
                </div>
                
            </div>
        </div>
            
    </div>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
            integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"
            integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF"
            crossorigin="anonymous"></script>
        <script>
             if(#{userBean.isLogged == false}){
                window.location.href="login.xhtml";
        }   
            
            var observe;
        if (window.attachEvent) {
            observe = function (element, event, handler) {
                element.attachEvent('on' + event, handler);
            };
        } else {
            observe = function (element, event, handler) {
                element.addEventListener(event, handler, false);
            };
        }

        function init() {
            var text = document.getElementById('text');

            function resize() {
                text.style.height = 'auto';
                text.style.height = text.scrollHeight + 'px';
            }

            /* 0-timeout to get the already changed text */
            function delayedResize() {
                window.setTimeout(resize, 0);
            }

            observe(text, 'change', resize);
            observe(text, 'cut', delayedResize);
            observe(text, 'paste', delayedResize);
            observe(text, 'drop', delayedResize);
            observe(text, 'keydown', delayedResize);

            text.focus();
            text.select();
            resize();
        }
        
         document.querySelectorAll('img.photoPost')
            .forEach((img) => {
                var modal = document.getElementById('myModal');


                var img = img;
                var modalImg = document.getElementById("img01");
                img.onclick = function () {
                    modal.style.display = "block";
                    modalImg.src = this.src;
                };

                var kapat = document.getElementsByClassName("close")[0];

                kapat.onclick = function () {
                    modal.style.display = "none";
                };
                window.onclick = function (event) {
                    if (event.target == modal) {
                        modal.style.display = "none";
                    }
                };
            });
              jQuery(document).ready(function($){
	//open popup
	$('.cd-popup-trigger').on('click', function(event){
		event.preventDefault();
		$('.cd-popup').addClass('is-visible');
	});
	
	//close popup
	$('.cd-popup').on('click', function(event){
		if( $(event.target).is('.cd-popup-close') || $(event.target).is('.cd-popup') ) {
			event.preventDefault();
			$(this).removeClass('is-visible');
		}
                if( $(event.target).is('.hayirClose') || $(event.target).is('.cd-popup') ) {
			event.preventDefault();
			$(this).removeClass('is-visible');
		}
	});
	//close popup when clicking the esc keyboard button
	$(document).keyup(function(event){
    	if(event.which=='27'){
    		$('.cd-popup').removeClass('is-visible');
	    }
    });
});
            </script>
    </h:body>
</html>

